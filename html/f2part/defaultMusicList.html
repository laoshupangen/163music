<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>我的</title>
    <link rel="stylesheet" type="text/css" href="../../css/api.css" />
    <link rel="stylesheet" type="text/css" href="../../css/style.css" />
    <link rel="stylesheet" type="text/css" href="../../css/iconfont.css">
    <style media="screen">
        .wrap {
            height: 100%;
            text-align: center;
        }

        header {
            padding: 10px 5px;
            background-color: rgba(0, 0, 0, 0.5);
            color: #fff;
        }

        .addToMusicList {
            padding: 8px 0;
            height: 20px;
            background-color: #9c9c64;
        }
    </style>
</head>

<body>
    <div class="wrap flex-wrap flex-vertical">
        <header>
            <div class="flex-wrap">
                <div class="" tapmode onclick="back()">
                    <div class="iconfont icon-fanhui">
                    </div>
                </div>
                <div class="flex-con">
                    <div class="">
                        <div class="">
                            歌曲名称
                        </div>
                        <div class="">
                            作者
                        </div>
                    </div>
                </div>
                <div class="">
                    <div class="iconfont icon-chakantiezifenxiang">
                    </div>
                </div>

            </div>
        </header>
        <div class="flex-con">
          <br><br>
          <div class="addToMusicList" tapmode onclick="addToMusicList()">
            添加歌曲
          </div>
          <br>
          <div class="addToMusicList" tapmode onclick="playMusic()">
            播放歌曲
          </div><br>
          <div class="addToMusicList" tapmode onclick="getCacheStorage()">
            查看缓存占用空间
          </div><br>
          <div class="addToMusicList" tapmode onclick="clearCache()">
            清除缓存
          </div><br>
          <div class="addToMusicList" tapmode onclick="Test()">
            测试模块
          </div><br>
          <div class="addToMusicList" tapmode onclick="openTest()">
            测试模块2
          </div><br>

        </div>





    </div>


    <script src="../../script/api.js" charset="utf-8"></script>
    <script type="text/javascript">
        apiready = function() {
            $api.fixStatusBar($api.dom('header'));
        }

        function addToMusicList() {
            var model = api.require("model");

            model.insert({
                class: 'songs',
                value: {
                    'name': 'songdhfa',
                    'url': 'test2',
                    'cover': 'pic1',
                    'singer': 'singer',
                    'pubTime': '2018-2-23',
                    'lyricser': 'lyricser',
                    'composer': 'composer',
                    'ablum': 'ablumName'
                }
            }, function(ret, err) {
                if (ret) {
                    console.log(JSON.stringify(ret));
                } else {
                    console.log(JSON.stringify(err));
                }
            });


        }

        function playMusic() {
            api.openWin({
                name: 'musicPlay',
                url: '../musicPlay/musicPlay.html',
                scrollEnabled: false,
                slidBackEnabled: false
            })
            // api.openFrame({
            //     name: 'musicPlay',
            //     url: '../musicPlay/musicPlay.html',
            //     rect: {
            //         x: 0,
            //         y: 0,
            //         w: api.winWidth,
            //         h: api.winHeight
            //     },
            //     pageParam: {
            //         name: 'test'
            //     },
            //     animation: {
            //         type: "movein", //动画类型（详见动画类型常量）
            //         subType: "from_right", //动画子类型（详见动画子类型常量）
            //         duration: 300
            //     },
            //     bounces: false,
            //     bgColor: 'rgba(0,0,0,0)',
            //     vScrollBarEnabled: true,
            //     hScrollBarEnabled: true
            // });

        }

        function Test() {
            api.openWin({
                name: 'test',
                url: '../musicPlay/test.html',
                scrollEnabled: false,
                slidBackEnabled: false
            })

        }
        function openTest() {
            api.openWin({
                name: 'dntest',
                url: '../musicPlay/daniutest.html',
                scrollEnabled: false,
                slidBackEnabled: false
            })

        }

        function back() {
            // api.bringFrameToFront({
            //     from: api.pageParam.frameName
            // });
            api.openFrame({
                name: api.pageParam.frameName,
                animation: {
                    type: "movein", //动画类型（详见动画类型常量）
                    subType: "from_left", //动画子类型（详见动画子类型常量）
                    duration: 300
                },
            });

        }

        function clearCache() {
            api.clearCache(function() {
                api.toast({
                    msg: '清除完成'
                });
            });

        }

        function getCacheStorage() {
            var size = api.getCacheSize({
                sync: true
            });
            console.log(size);

        }
    </script>


</body>

</html>
